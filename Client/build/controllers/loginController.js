"use strict";app.controller("loginController",["$scope","$location","authService","ngAuthSettings",function(e,t,o,n){e.loginData={email:"",password:"",useRefreshTokens:!1},e.message="",e.login=function(){o.login(e.loginData).then(function(e){t.path("/orders")},function(t){e.message=t.error_description})},e.authExternalProvider=function(t){var o=location.protocol+"//"+location.host+"/authcomplete.html",i=n.apiServiceBaseUri+"api/Account/ExternalLogin?provider="+t+"&response_type=token&client_id="+n.clientId+"&redirect_uri="+o;window.$windowScope=e;window.open(i,"Authenticate Account","location=0,status=0,width=600,height=750")},e.authCompletedCB=function(n){e.$apply(function(){if("False"==n.haslocalaccount)o.logOut(),o.externalAuthData={provider:n.provider,email:n.external_user_name,externalAccessToken:n.external_access_token},t.path("/associate");else{var i={provider:n.provider,externalAccessToken:n.external_access_token};o.obtainAccessToken(i).then(function(e){t.path("/orders")},function(t){e.message=t.error_description})}})}}]);