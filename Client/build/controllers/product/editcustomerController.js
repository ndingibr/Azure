"use strict";app.controller("editcustomerController",["$scope","$location","$timeout","customersService","$routeParams","$filter",function(e,s,t,a,o,r){e.savedSuccessfully=!1,e.message="",e.selectedUser="",e.customer=[],e.users=[];var u="";e.roles=["guest","user","customer","admin"],e.userroles=["guest","user","customer","admin"],e.submit=function(){e.customer.userId=e.selectedUser,a.editCustomer(o.id,e.customer).then(function(s){e.savedSuccessfully=!0,e.message="Customer has been successfully saved",n()},function(s){var t=[];for(var a in s.data.modelState)for(var o=0;o<s.data.modelState[a].length;o++)t.push(s.data.modelState[a][o]);e.message="Failed to save customer due to:"+t.join(" ")})};var n=function(){var e=t(function(){t.cancel(e),s.path("/customers")},2e3)};e.loadUsers=function(){a.getUsers().then(function(s){e.users=s.data,e.loadSelectedUser()},function(e){alert(e.data.message)})},e.loadRoles=function(){a.getUsers().then(function(s){e.users=s.data,e.loadSelectedUser()},function(e){alert(e.data.message)})},e.loadCustomer=function(){a.getCustomer(o.id).then(function(s){e.customer=s.data,u=e.customer.userId},function(e){alert(e.data.message)})},e.loadSelectedUser=function(){var s=r("filter")(e.users,{id:u});e.selectedUser=s[0].id},e.loadUserRoles=function(){a.getUserRoles(o.id).then(function(s){e.userroles=s.data},function(e){alert(e.data.message)})},e.orderOptions=[{name:"Newest",value:"age"},{name:"Alphabetical",value:"name"}],e.orderModel=e.orderOptions[0],e.loadUsers(),e.loadRoles(),e.loadCustomer()}]);